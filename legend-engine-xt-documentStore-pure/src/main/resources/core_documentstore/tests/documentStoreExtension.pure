import meta::json::*;
import meta::external::store::document::metamodel::execute::*;
import meta::external::store::document::metamodel::runtime::*;

function meta::external::store::document::metamodel::execute::executeInDb(sql:String[1], databaseConnection:DatabaseConnection[1]):ResultSet[1]
{
   let resultSet = ^ResultSet(
       executionTimeInNanoSecond =  1000,
       connectionAcquisitionTimeInNanoSecond = 1000);
   let fieldNames = ['firstName', 'lastName'];
   let documents = [
    ^meta::external::store::document::metamodel::execute::Document(
        value = newJSONObject
        ([
        newJSONKeyValue('firstName', ^JSONString(value='Theodosis 1')),
        newJSONKeyValue('lastName', ^JSONString(value='Malatestas 1'))
        ]),
        parent = $resultSet
        ),
    ^meta::external::store::document::metamodel::execute::Document(
        value = newJSONObject
        ([
        newJSONKeyValue('firstName', ^JSONString(value='Theodosis 2')),
        newJSONKeyValue('lastName', ^JSONString(value='Malatestas 2'))
        ]),
        parent = $resultSet
        )
   ];
    $resultSet->mutateAdd('documents', $documents);
    $resultSet->mutateAdd('fieldNames', $fieldNames);
    $resultSet;
}